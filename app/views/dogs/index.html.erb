<main class="max-w-7xl mx-auto px-6 py-12">

  <!-- T√≠tulo e Bot√£o Filtrar -->
  <div class="flex flex-col md:flex-row items-center justify-between mb-8 gap-4">
    <h1 class="text-3xl md:text-4xl font-extrabold text-gray-800">Nossos C√£es Dispon√≠veis</h1>
    <button
data-action="click->modal#open"
class="flex items-center bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-500 transition">
      üîç Filtrar
    </button>
  </div>

  <!-- Grid de Cards -->
  <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    <% @dogs.each do |dog| %>
      <article class="bg-white rounded-2xl shadow hover:shadow-lg transition overflow-hidden">

        <!-- Carousel -->
        <div data-controller="carousel" data-carousel-index-value="0" class="relative h-48 bg-gray-100 overflow-hidden">
          <% if dog.images.attached? %>
            <% dog.images.each_with_index do |img, i| %>
              <div data-carousel-target="slide" class="absolute inset-0 <%= 'hidden' unless i.zero? %>">
                <%= image_tag url_for(img.variant(resize_to_fill: [400, 240]).processed), class: "w-full h-full object-cover" %>
              </div>
            <% end %>
            <% if dog.images.size > 1 %>
              <button data-action="click->carousel#previous" class="absolute top-2 left-2 bg-black/50 text-white p-1 rounded-full hover:bg-black/70">‚ùÆ</button>
              <button data-action="click->carousel#next" class="absolute top-2 right-2 bg-black/50 text-white p-1 rounded-full hover:bg-black/70">‚ùØ</button>
            <% end %>
          <% else %>
            <%= image_tag "default-dog.jpg", class: "w-full h-full object-cover" %>
          <% end %>
        </div>

        <!-- Dados do Dog -->
        <div class="p-4 text-center">
          <h2 class="text-xl font-semibold text-gray-800 mb-1 truncate"><%= dog.name.titleize %></h2>
          <p class="text-gray-600 text-sm mb-3"><%= dog.breed %> ‚Ä¢ <%= dog.age %> anos</p>
          <%= link_to "Ver detalhes", dog_path(dog), class: "block bg-green-600 text-white py-2 rounded-full hover:bg-green-500 transition" %>
        </div>
      </article>
    <% end %>
  </section>

  <!-- Modal de Filtros -->
  <div data-controller="modal" class="fixed inset-0 hidden items-center justify-center z-50">
    <div data-action="click->modal#close" class="absolute inset-0 bg-black/50 backdrop-blur-sm"></div>
    <div class="relative bg-white rounded-xl shadow-xl w-11/12 max-w-md p-6 z-10">
      <button data-action="click->modal#close" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">‚úï</button>
      <h2 class="text-2xl font-semibold mb-4">Filtrar C√£es</h2>
      <%= form_with url: dogs_path, method: :get, local: true, class: "space-y-4" do %>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Nome</label>
          <%= text_field_tag :query, params[:query], class: "w-full border-gray-300 rounded px-3 py-2 focus:ring-green-500 focus:border-green-500" %>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Ra√ßa</label>
          <%= select_tag :breed, options_for_select([["Todas", ""]] + @breeds.map { |b| [b, b] }, params[:breed]), class: "w-full border-gray-300 rounded px-3 py-2 focus:ring-green-500 focus:border-green-500" %>
        </div>
        <div>
          <%= submit_tag "Aplicar", class: "w-full bg-green-600 text-white py-2 rounded hover:bg-green-500 transition" %>
        </div>
      <% end %>
    </div>
  </div>

</main>